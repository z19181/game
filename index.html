<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>夜城传说：霓虹偶像帝国</title>
    <!-- 引入科技感字体 -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --neon-blue: #00f3ff;
            --neon-pink: #ff0055;
            --neon-yellow: #fcee0a;
            --bg-dark: #050505;
            --glass-bg: rgba(20, 20, 30, 0.7);
            --border-glow: 0 0 10px var(--neon-blue), 0 0 20px var(--neon-blue);
        }

        * { box-sizing: border-box; user-select: none; }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-dark);
            color: white;
            font-family: 'Rajdhani', sans-serif;
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* 背景层：包含场景图和网格动画 */
        .scene-background {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -2;
            background-size: cover;
            background-position: center;
            transition: background-image 0.5s ease;
            filter: brightness(0.4) contrast(1.2);
        }

        /* 赛博朋克网格覆盖 */
        .grid-overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            background-image: 
                linear-gradient(rgba(0, 243, 255, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 243, 255, 0.1) 1px, transparent 1px);
            background-size: 40px 40px;
            perspective: 500px;
            box-shadow: inset 0 0 100px #000;
        }

        /* 扫描线特效 */
        .scanlines {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.2));
            background-size: 100% 4px;
            z-index: 10;
            pointer-events: none;
            opacity: 0.6;
        }

        /* UI 容器 */
        .main-interface {
            width: 100%;
            max-width: 500px;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 20px;
            z-index: 2;
            position: relative;
        }

        /* 顶部 HUD (数值栏) */
        .hud-top {
            display: flex;
            justify-content: space-between;
            background: var(--glass-bg);
            border: 1px solid var(--neon-blue);
            padding: 10px;
            backdrop-filter: blur(5px);
            clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px);
        }

        .stat-item {
            text-align: center;
            width: 22%;
        }
        .stat-label { font-size: 0.8rem; color: var(--neon-blue); letter-spacing: 1px; }
        .stat-bar-container {
            height: 6px;
            background: #333;
            margin-top: 5px;
            position: relative;
            overflow: hidden;
        }
        .stat-bar-fill {
            height: 100%;
            background: var(--neon-pink);
            box-shadow: 0 0 5px var(--neon-pink);
            transition: width 0.3s ease;
        }

        /* 中间卡片区域 */
        .card-container {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .hologram-card {
            width: 100%;
            background: rgba(10, 10, 15, 0.85);
            border: 2px solid var(--neon-pink);
            padding: 0;
            position: relative;
            box-shadow: 0 0 20px rgba(255, 0, 85, 0.3);
            backdrop-filter: blur(10px);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            transition: transform 0.2s;
        }

        /* 角色图区域 */
        .character-frame {
            width: 100%;
            height: 300px;
            background: #000;
            position: relative;
            overflow: hidden;
        }

        .character-img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* 保持比例填充 */
            object-position: top center;
        }

        .card-content {
            padding: 20px;
            text-align: center;
            border-top: 1px solid var(--neon-pink);
        }

        .card-title {
            font-family: 'Orbitron', sans-serif;
            color: var(--neon-yellow);
            margin: 0 0 10px 0;
            font-size: 1.4rem;
            text-transform: uppercase;
            text-shadow: 0 0 5px var(--neon-yellow);
        }

        .card-text {
            font-size: 1.1rem;
            line-height: 1.5;
            color: #eee;
        }

        /* 按钮区域 */
        .control-panel {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin-bottom: 20px;
        }

        .cyber-btn {
            flex: 1;
            padding: 20px 10px;
            background: transparent;
            border: 2px solid;
            font-family: 'Orbitron', sans-serif;
            font-size: 0.9rem;
            color: white;
            cursor: pointer;
            position: relative;
            transition: all 0.3s;
            text-transform: uppercase;
            clip-path: polygon(15px 0, 100% 0, 100% calc(100% - 15px), calc(100% - 15px) 100%, 0 100%, 0 15px);
        }

        .btn-left {
            border-color: var(--neon-blue);
            color: var(--neon-blue);
            text-align: left;
            padding-left: 20px;
        }
        .btn-left:hover {
            background: var(--neon-blue);
            color: black;
            box-shadow: 0 0 15px var(--neon-blue);
        }

        .btn-right {
            border-color: var(--neon-pink);
            color: var(--neon-pink);
            text-align: right;
            padding-right: 20px;
        }
        .btn-right:hover {
            background: var(--neon-pink);
            color: white;
            box-shadow: 0 0 15px var(--neon-pink);
        }

        /* 结局弹窗 */
        #game-over {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 100;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        .glitch-text {
            font-family: 'Orbitron';
            font-size: 3rem;
            color: red;
            text-shadow: 2px 2px var(--neon-blue);
            animation: glitch 1s infinite;
        }
        @keyframes glitch {
            0% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
            100% { transform: translate(0); }
        }

    </style>
</head>
<body>

    <!-- 动态背景层 (场景图) -->
    <div class="scene-background" id="bg-layer" style="background-image: url('https://placehold.co/800x600/111/444?text=Night+City+View');"></div>
    <div class="grid-overlay"></div>
    <div class="scanlines"></div>

    <div class="main-interface">
        
        <!-- 顶部数值 HUD -->
        <div class="hud-top">
            <div class="stat-item">
                <div class="stat-label">CREDITS(资)</div>
                <div class="stat-bar-container"><div id="bar-money" class="stat-bar-fill" style="width: 50%; background: #ffd700;"></div></div>
            </div>
            <div class="stat-item">
                <div class="stat-label">HYPE(热)</div>
                <div class="stat-bar-container"><div id="bar-fame" class="stat-bar-fill" style="width: 50%; background: #ff4500;"></div></div>
            </div>
            <div class="stat-item">
                <div class="stat-label">VIBE(颜)</div>
                <div class="stat-bar-container"><div id="bar-looks" class="stat-bar-fill" style="width: 50%; background: #ff00ff;"></div></div>
            </div>
            <div class="stat-item">
                <div class="stat-label">SYNC(律)</div>
                <div class="stat-bar-container"><div id="bar-ethics" class="stat-bar-fill" style="width: 50%; background: #00f3ff;"></div></div>
            </div>
        </div>

        <!-- 卡片交互区 -->
        <div class="card-container">
            <div class="hologram-card" id="card-element">
                <!-- 角色图片 -->
                <div class="character-frame">
                    <img id="char-img" class="character-img" src="" alt="Character">
                </div>
                <div class="card-content">
                    <h2 id="card-title" class="card-title">EVENT LOG</h2>
                    <p id="card-desc" class="card-text">Loading data stream...</p>
                </div>
            </div>
        </div>

        <!-- 按钮 -->
        <div class="control-panel">
            <button class="cyber-btn btn-left" id="btn-left" onclick="makeChoice('left')">REJECT</button>
            <button class="cyber-btn btn-right" id="btn-right" onclick="makeChoice('right')">ACCEPT</button>
        </div>
    </div>

    <!-- 结局画面 -->
    <div id="game-over">
        <h1 class="glitch-text">SYSTEM FAILURE</h1>
        <p id="end-reason" style="color:#00f3ff; max-width: 80%; line-height: 1.6;">Connection Lost.</p>
        <button class="cyber-btn" style="margin-top: 30px; border-color:white;" onclick="restartGame()">REBOOT SYSTEM</button>
    </div>

<script>
    // --- 游戏配置 ---
    let stats = { money: 50, fame: 50, looks: 50, ethics: 50 };
    let weeks = 0;
    let currentCard = {};

    /* 
       ================================================================
       在此处替换你的图片！
       bg: 背景场景图链接
       img: 角色/事件图链接
       你可以使用本地图片 (例如 'images/girl1.jpg') 
       或者网络图片链接。
       ================================================================
    */
    const defaultBg = "https://images.unsplash.com/photo-1555680202-c86f0e12f086?q=80&w=1000&auto=format&fit=crop"; // 夜景街道

    const events = [
        {
            title: "捡到宝了",
            text: "后巷发现一个为了换机械义肢而欠债的落魄歌手，虽然很脏，但脸是顶级的。",
            bg: "https://images.unsplash.com/photo-1605218427306-0220221af784?q=80&w=1000&auto=format&fit=crop", // 霓虹小巷
            img: "https://images.unsplash.com/photo-1534528741775-53994a69daeb?q=80&w=600&auto=format&fit=crop", // 美女/帅哥图
            left: "滚开 (Dismiss)",
            right: "签下他 (Sign Contract)",
            effectLeft: [0, 0, 0, 0], 
            effectRight: [-10, 5, 15, 0] 
        },
        {
            title: "非法改装",
            text: "黑市医生提议给女团成员植入'魅魔声线'芯片，能通过声波控制粉丝情绪。",
            bg: "https://images.unsplash.com/photo-1515630278258-407f66498911?q=80&w=1000&auto=format&fit=crop", // 赛博诊所
            img: "https://images.unsplash.com/photo-1580489944761-15a19d654956?q=80&w=600&auto=format&fit=crop", // 赛博女性
            left: "太危险了 (Reject)",
            right: "立刻植入 (Install Chip)",
            effectLeft: [0, -5, 0, 5], 
            effectRight: [-20, 20, 10, -30] // 掉大量节操
        },
        {
            title: "金主来电",
            text: "荒坂塔的高层看上了你的C位，想让她去'私人云端派对'表演一晚。",
            bg: "https://images.unsplash.com/photo-1480796927426-f609979314bd?q=80&w=1000&auto=format&fit=crop", // 摩天大楼
            img: "https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?q=80&w=600&auto=format&fit=crop", // 帅哥/高层
            left: "拒绝潜规则 (Refuse)",
            right: "这都是为了公司 (Accept)",
            effectLeft: [-10, 5, 5, 10], 
            effectRight: [40, -5, -20, -20]
        },
        {
            title: "虚拟入侵",
            text: "竞争对手黑掉了我们的全息投影设备，舞台上出现了不雅画面。",
            bg: "https://images.unsplash.com/photo-1492684223066-81342ee5ff30?q=80&w=1000&auto=format&fit=crop", // 舞台
            img: "https://plus.unsplash.com/premium_photo-1661330664949-075e6d628c68?q=80&w=600&auto=format&fit=crop", // 故障画面或黑客
            left: "切断电源 (Shutdown)",
            right: "反向黑回去 (Counter-Hack)",
            effectLeft: [-5, -10, 0, 0], 
            effectRight: [-15, 10, 0, -10]
        },
        {
            title: "粉丝狂热",
            text: "一群狂热粉试图把意识上传到公司服务器，想永远和偶像在一起。",
            bg: "https://images.unsplash.com/photo-1550751827-4bd374c3f58b?q=80&w=1000&auto=format&fit=crop", // 数据中心
            img: "https://images.unsplash.com/photo-1516035069371-29a1b244cc32?q=80&w=600&auto=format&fit=crop", // 狂热人群
            left: "报警清理 (Police)",
            right: "收费允许 (Charge Fee)",
            effectLeft: [0, -5, 0, 5], 
            effectRight: [30, 10, 0, -40] // 极度缺德
        }
    ];

    // --- 核心逻辑 ---

    function initGame() {
        stats = { money: 50, fame: 50, looks: 50, ethics: 50 };
        weeks = 0;
        document.getElementById('game-over').style.display = 'none';
        updateUI();
        nextCard();
    }

    function updateUI() {
        updateBar('bar-money', stats.money);
        updateBar('bar-fame', stats.fame);
        updateBar('bar-looks', stats.looks);
        updateBar('bar-ethics', stats.ethics);
    }

    function updateBar(id, value) {
        const el = document.getElementById(id);
        el.style.width = value + '%';
        // 颜色逻辑
        if (value < 20) el.style.background = 'red';
        else if (value > 80) el.style.background = '#fff';
        else {
             if(id.includes('money')) el.style.background = '#ffd700';
             if(id.includes('fame')) el.style.background = '#ff4500';
             if(id.includes('looks')) el.style.background = '#ff00ff';
             if(id.includes('ethics')) el.style.background = '#00f3ff';
        }
    }

    function nextCard() {
        const randomIndex = Math.floor(Math.random() * events.length);
        currentCard = events[randomIndex];
        
        // 更新文本
        document.getElementById('card-title').innerText = currentCard.title;
        document.getElementById('card-desc').innerText = currentCard.text;
        document.getElementById('btn-left').innerText = "< " + currentCard.left;
        document.getElementById('btn-right').innerText = currentCard.right + " >";

        // 更新图片 (使用占位符或真实链接)
        document.getElementById('bg-layer').style.backgroundImage = `url('${currentCard.bg || defaultBg}')`;
        document.getElementById('char-img').src = currentCard.img;

        // 卡片进入动画
        const card = document.getElementById('card-element');
        card.style.transform = 'scale(0.95) translateY(10px)';
        card.style.opacity = '0';
        setTimeout(() => {
            card.style.transform = 'scale(1) translateY(0)';
            card.style.opacity = '1';
        }, 50);
    }

    function makeChoice(direction) {
        weeks++;
        const effects = direction === 'left' ? currentCard.effectLeft : currentCard.effectRight;

        stats.money += effects[0];
        stats.fame += effects[1];
        stats.looks += effects[2];
        stats.ethics += effects[3];

        // 边界限制
        for (let key in stats) {
            if (stats[key] > 100) stats[key] = 100;
        }

        updateUI();
        checkGameOver();
    }

    function checkGameOver() {
        let reason = "";
        let isDead = false;

        if (stats.money <= 0) {
            reason = "资金链断裂。你被高利贷切碎卖到了义体黑市。";
            isDead = true;
        } else if (stats.fame <= 0) {
            reason = "无人问津。你的酒吧变成了流浪汉的公共厕所。";
            isDead = true;
        } else if (stats.looks <= 0) {
            reason = "颜值崩塌。团员因为植入体排异反应集体毁容，公司倒闭。";
            isDead = true;
        } else if (stats.ethics <= 0) {
            reason = "道德沦丧。NCPD特警组冲进了你的办公室，你被判处终身监禁。";
            isDead = true;
        } else if (stats.ethics >= 100) {
            reason = "过于圣母。你在夜之城就像一只小白兔，被其他公司吞并了。";
            isDead = true;
        }

        if (isDead) {
            document.getElementById('game-over').style.display = 'flex';
            document.getElementById('end-reason').innerText = reason + `\n\n存活周数: ${weeks}`;
        } else {
            nextCard();
        }
    }

    function restartGame() {
        initGame();
    }

    // 预加载
    initGame();

</script>
</body>
</html>